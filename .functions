#!/bin/bash

function c() {
  if [ -f "$PWD/bin/rails" ]; then
    bin/spring stop
    bin/rails console
  else
    ansi --bold --red "Ain't no rails app here"
  fi
}

function dotfiles() {
  cd ~/dotfiles
  subl ~/dotfiles
}

# find shorthand
# https://github.com/paulirish/dotfiles/blob/master/.functions#L9-L12
function f() {
  find . -name "$1" 2>&1 | grep -v 'Permission denied'
}

# echo all args then call them
# https://stackoverflow.com/a/12240862
function echo-then-run() {
  ansi --bold --white-intense "$*" ; "$@" ;
}

# https://github.com/ryanwood/dotfiles/blob/d25fff3f5bb22cfaee4aea7eb8aa122621b8b7f7/zsh/functions/g
#
# No arguments: `git status`
# With arguments: acts like `git`
function g() {
  if [[ $# -gt 0 ]]; then
    git "$@"
  else
    git status -sb
  fi
}

# See here: https://stackoverflow.com/questions/10610327/delete-all-local-git-branches/26152574#26152574
function git-delete-merged-branches() {
  for mergedBranch in $(git for-each-ref --format '%(refname:short)' --merged HEAD refs/heads/)
  do
    git branch -d ${mergedBranch}
  done
}

function ip() {
  curl ipinfo.io/$1
  echo ''
}

function ruby-server() {
  dir=${1:="."}
  ruby -run -e httpd $dir -p 5000
}

function s() {
  if [ -f "$PWD/bin/rails" ]; then
    bin/rails s
  else
    ansi --bold --red "Ain't no rails app here"
  fi
}
